{
  "openapi": "3.0.0",
  "paths": {
    "/v1/videos": {
      "post": {
        "operationId": "ApiVideoController_createVideo",
        "summary": "Create a new video",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVideoDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The video has been successfully created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideoResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or missing required fields.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing authentication token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedDto"
                }
              }
            }
          }
        },
        "tags": [
          "Videos"
        ],
        "security": [
          {
            "api-key": []
          }
        ]
      },
      "get": {
        "operationId": "ApiVideoController_getUserVideos",
        "summary": "Get user videos",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the list of user videos.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideosListResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or missing required fields.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing authentication token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedDto"
                }
              }
            }
          },
          "404": {
            "description": "Resource not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFoundDto"
                }
              }
            }
          }
        },
        "tags": [
          "Videos"
        ],
        "security": [
          {
            "api-key": []
          }
        ]
      }
    },
    "/v1/videos/{id}": {
      "patch": {
        "operationId": "ApiVideoController_updateVideo",
        "summary": "Update a video",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Video ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateVideoDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The video has been successfully updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideoResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or missing required fields.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing authentication token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedDto"
                }
              }
            }
          },
          "403": {
            "description": "User does not have permission to update videos.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForbiddenDto"
                }
              }
            }
          },
          "404": {
            "description": "Video not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFoundDto"
                }
              }
            }
          }
        },
        "tags": [
          "Videos"
        ],
        "security": [
          {
            "api-key": []
          }
        ]
      },
      "get": {
        "operationId": "ApiVideoController_getVideo",
        "summary": "Get a video by ID",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Video ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the video details.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideoResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input or missing required fields.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequestDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing authentication token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnauthorizedDto"
                }
              }
            }
          },
          "403": {
            "description": "User does not have permission to get video.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForbiddenDto"
                }
              }
            }
          },
          "404": {
            "description": "Video not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFoundDto"
                }
              }
            }
          }
        },
        "tags": [
          "Videos"
        ],
        "security": [
          {
            "api-key": []
          }
        ]
      }
    }
  },
  "info": {
    "title": "Video AIditor APIs",
    "description": "",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [],
  "servers": [
    {
      "url": "https://api.videoaiditor.com",
      "description": "REST API server"
    }
  ],
  "components": {
    "securitySchemes": {
      "api-key": {
        "type": "apiKey",
        "in": "header",
        "name": "videoaiditor_api_key",
        "description": "Enter your API key here"
      }
    },
    "schemas": {
      "CanvasDto": {
        "type": "object",
        "properties": {
          "width": {
            "type": "number",
            "default": 1920
          },
          "height": {
            "type": "number",
            "default": 1080
          }
        },
        "required": [
          "width",
          "height"
        ]
      },
      "MetadataDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "backgroundColor": {
            "type": "string",
            "default": "#000000"
          },
          "duration": {
            "type": "number"
          },
          "fps": {
            "type": "number",
            "default": 30
          },
          "canvas": {
            "$ref": "#/components/schemas/CanvasDto"
          }
        },
        "required": [
          "name",
          "backgroundColor",
          "duration",
          "fps",
          "canvas"
        ]
      },
      "TimeFrameDto": {
        "type": "object",
        "properties": {
          "start": {
            "type": "number",
            "default": 0
          },
          "end": {
            "type": "number"
          }
        },
        "required": [
          "start",
          "end"
        ]
      },
      "PositionDto": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number",
            "default": 0
          },
          "y": {
            "type": "number",
            "default": 0
          },
          "z": {
            "type": "number",
            "default": 0
          }
        },
        "required": [
          "x",
          "y",
          "z"
        ]
      },
      "ScaleDto": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number",
            "default": 1
          },
          "y": {
            "type": "number",
            "default": 1
          }
        },
        "required": [
          "x",
          "y"
        ]
      },
      "TransformDto": {
        "type": "object",
        "properties": {
          "scale": {
            "$ref": "#/components/schemas/ScaleDto"
          },
          "rotation": {
            "type": "number"
          }
        },
        "required": [
          "scale",
          "rotation"
        ]
      },
      "SizeDto": {
        "type": "object",
        "properties": {
          "width": {
            "type": "number",
            "default": 100
          },
          "height": {
            "type": "number",
            "default": 100
          }
        },
        "required": [
          "width",
          "height"
        ]
      },
      "EffectsDto": {
        "type": "object",
        "properties": {
          "opacity": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "default": 1
          }
        },
        "required": [
          "opacity"
        ]
      },
      "TextPropertiesDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string"
          },
          "fontSize": {
            "type": "number",
            "default": 16
          },
          "fontWeight": {
            "type": "number",
            "default": 400
          },
          "fontFamily": {
            "type": "string",
            "default": "Arial"
          },
          "color": {
            "type": "string",
            "default": "#000000"
          },
          "backgroundColor": {
            "type": "string",
            "default": "transparent"
          },
          "textAlign": {
            "type": "string",
            "default": "left"
          },
          "fontStyle": {
            "type": "string",
            "default": "normal"
          },
          "lineHeight": {
            "type": "number",
            "default": 1.2
          },
          "underline": {
            "type": "boolean",
            "default": false
          }
        },
        "required": [
          "content",
          "fontSize",
          "fontWeight",
          "fontFamily",
          "color",
          "backgroundColor",
          "textAlign",
          "fontStyle",
          "lineHeight",
          "underline"
        ]
      },
      "ClipDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "source": {
            "type": "string"
          },
          "timeFrame": {
            "$ref": "#/components/schemas/TimeFrameDto"
          },
          "position": {
            "$ref": "#/components/schemas/PositionDto"
          },
          "transform": {
            "$ref": "#/components/schemas/TransformDto"
          },
          "size": {
            "$ref": "#/components/schemas/SizeDto"
          },
          "effects": {
            "$ref": "#/components/schemas/EffectsDto"
          },
          "textProperties": {
            "$ref": "#/components/schemas/TextPropertiesDto"
          }
        },
        "required": [
          "id",
          "type",
          "name",
          "source",
          "timeFrame",
          "position",
          "transform",
          "size"
        ]
      },
      "CreateVideoDto": {
        "type": "object",
        "properties": {
          "version": {
            "type": "string"
          },
          "metadata": {
            "$ref": "#/components/schemas/MetadataDto"
          },
          "clips": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ClipDto"
            }
          },
          "additional": {
            "type": "object"
          }
        },
        "required": [
          "version",
          "metadata",
          "clips"
        ]
      },
      "ResponseMetadataDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "backgroundColor": {
            "type": "string",
            "default": "#000000"
          },
          "duration": {
            "type": "number"
          },
          "fps": {
            "type": "number",
            "default": 30
          },
          "canvas": {
            "$ref": "#/components/schemas/CanvasDto"
          },
          "redirectUrl": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "backgroundColor",
          "duration",
          "fps",
          "canvas",
          "redirectUrl"
        ]
      },
      "VideoResponseData": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string"
          },
          "version": {
            "type": "string"
          },
          "metadata": {
            "$ref": "#/components/schemas/ResponseMetadataDto"
          },
          "clips": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ClipDto"
            }
          },
          "additional": {
            "type": "object"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "_id",
          "version",
          "metadata",
          "clips",
          "createdAt",
          "updatedAt"
        ]
      },
      "VideoResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/VideoResponseData"
          }
        },
        "required": [
          "data"
        ]
      },
      "BadRequestDto": {
        "type": "object",
        "properties": {
          "statusCode": {
            "type": "number",
            "example": 400
          },
          "message": {
            "example": [
              "Invalid input",
              "Missing required field"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "error": {
            "type": "string",
            "example": "Bad Request"
          }
        },
        "required": [
          "statusCode",
          "message",
          "error"
        ]
      },
      "UnauthorizedDto": {
        "type": "object",
        "properties": {
          "statusCode": {
            "type": "number",
            "example": 401
          },
          "message": {
            "example": [
              "Invalid credentials",
              "Token expired"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "error": {
            "type": "string",
            "example": "Unauthorized"
          }
        },
        "required": [
          "statusCode",
          "message",
          "error"
        ]
      },
      "UpdateVideoDto": {
        "type": "object",
        "properties": {
          "metadata": {
            "$ref": "#/components/schemas/MetadataDto"
          },
          "clips": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ClipDto"
            }
          }
        }
      },
      "ForbiddenDto": {
        "type": "object",
        "properties": {
          "statusCode": {
            "type": "number",
            "example": 403
          },
          "message": {
            "example": [
              "Access denied",
              "Insufficient permissions"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "error": {
            "type": "string",
            "example": "Forbidden"
          }
        },
        "required": [
          "statusCode",
          "message",
          "error"
        ]
      },
      "NotFoundDto": {
        "type": "object",
        "properties": {
          "statusCode": {
            "type": "number",
            "example": 404
          },
          "message": {
            "example": [
              "Resource not found"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "error": {
            "type": "string",
            "example": "Not Found"
          }
        },
        "required": [
          "statusCode",
          "message",
          "error"
        ]
      },
      "VideosListResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/VideoResponseData"
            }
          },
          "pagination": {
            "type": "object"
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      }
    }
  }
}